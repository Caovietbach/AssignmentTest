<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Dashboard</title>
</head>
<body>
    <h1>FPT University</h1>
    <div class = "bar">
        <a href="/qamanager/home">Menu</a>
        <a href="/qamanager/viewIdea">View Idea</a>
        <a href="/qamanager/viewAccount">View Account</a>
        <a href="/logout">Logout</a> 
    </div>
    <h2>View the dashboard of the event</h2>
    <form method="post" action="/qamanager/viewChart">
        <select name="c" >
            <option value= "None">Please choose the chart you want to see about this event</option> 
            <option value= "Column">Column chart about submited ideas per departments in this event</option> 
            <option value= "Pie">Pie chart about number of submited ideas per department during this event</option> 
        </select>
        <br>
        Event: 
        <br>
        <select name="Event">
            <option value="0">Please choose an event</option>
            {{#each events}}
            <option value="{{_id}}">{{name}}</option>
            {{/each}}
        </select>
        <br>
        <input type="submit" value="Generate Chart">
        
    </form>
    {{#if chart1}}
    <center>
    <section>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <canvas id="myChart" width="100" height="100"></canvas>
        <script>
            var ctx = document.getElementById('myChart');
                //var chartData = {{{chartData1}}}
                var x = {{{departments}}}
                var y = [{{{likes}}}]
                var data = {
                    labels: x,
                    datasets: [{
                        label: "Likes per department in selected event",
                        data: y,
                        backgroundColor: 'blue'
                    }]
                };
                var options = {
                    legend: {display: false},
                    title: {
                        display: true,
                        text: "The received like of each department in this event."
                    }
                };
                new Chart(ctx, {
                    type: 'bar',
                    data: data,
                    options: options
                });
        </script>
    </section>
    </center>
    {{/if}}
    {{#if chart2}}
    <center>
    <section>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <canvas id="myChart" width="100" height="100"></canvas>
        <script>
            var ctx = document.getElementById('myChart');
                var x = {{{departments}}}
                var y = [{{{ideas}}}]
                var data = {
                    labels: x,
                    datasets: [{
                        data: y,
                        backgroundColor: {{{backgroundColors}}}
                    }]
                };
                var options = {
                    title: {
                        display: true,
                        text: "The received like of each department in this event."
                    }
                };
                new Chart(ctx, {
                    type: 'pie',
                    data: data,
                    options: options
                });
        </script>
    </section>
    </center>
    {{/if}}


</body>
</html>